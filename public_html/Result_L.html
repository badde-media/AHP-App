<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="Bilder/favicon.ico">
    <title>AHP APP</title>
    <link rel="stylesheet" href="css/foundation.css">
    <link rel="stylesheet" href="css/foundation-apps.css">
    <link rel="stylesheet" href="css/survey.css">
  </head>
    <body onLoad="berechne();">

        <!-- Start Title Bar -->
        <div class="primary title-bar">

            <div class="center title">Gesamtergebnis</div>
            <span class="left"><a href="Single_Test3.html">Zurück</a></span>
            <span class="right"><a href="Dashboard.html">Dashboard</a></span>
        </div>

        <div class="wrap2">
            <div id="k1" class="center"></div>
            <div id="k1max" class="center"></div>

            <div id="k1med" class="center">
            </div>
            <div id="k1min" class="center">
            </div>
            
            
            <div id="k2" class="center"></div>
            <div id="k2max" class="center"></div>

            <div id="k2med" class="center">
            </div>
            <div id="k2min" class="center">
            </div>
            
            
            <div id="k3" class="center"></div>
            <div id="k3max" class="center"></div>

            <div id="k3med" class="center">
            </div>
            <div id="k3min" class="center">
            </div>
            <!--<svg width="130" height="130">
              <circle cx="50" cy="50" r="40" stroke="" stroke-width="4" fill="#006cb0" />
            </svg>-->
</div>
        
<script> 
    
    function berechne() {
        
        // lade Kriterien Namen
        var skriterium1= localStorage.getItem("skriterium1");
        var skriterium2= localStorage.getItem("skriterium2");
        var skriterium3= localStorage.getItem("skriterium3");
        var sloesung1  = localStorage.getItem("sloesung1");
        var sloesung2  = localStorage.getItem("sloesung2");
        var sloesung3  = localStorage.getItem("sloesung3");
        var zeilenResultk1  = localStorage.getItem("zeilenResultk1")/100;
        var zeilenResultk2  = localStorage.getItem("zeilenResultk2")/100;
        var zeilenResultk3  = localStorage.getItem("zeilenResultk3")/100;
    
        // lade und quadriere Matrizen
        lk1Matrix = JSON.parse(localStorage["lk1Matrix"]);  
	var lk1MatrixResult = multiply( lk1Matrix, lk1Matrix );
        
        lk2Matrix = JSON.parse(localStorage["lk2Matrix"]);  
	var lk2MatrixResult = multiply( lk2Matrix, lk2Matrix );
        
        lk3Matrix = JSON.parse(localStorage["lk3Matrix"]);  
	var lk3MatrixResult = multiply( lk3Matrix, lk3Matrix );
        
        // schreibe quadrierte Matrizen in Webstorage
        localStorage["lk1MatrixResult"] = JSON.stringify(lk1MatrixResult);
        localStorage["lk2MatrixResult"] = JSON.stringify(lk2MatrixResult);
        localStorage["lk3MatrixResult"] = JSON.stringify(lk3MatrixResult);
        
        // berechne Zeilen Summen 
        zeilenResultlk1_1 = lk1MatrixResult[0][0] + lk1MatrixResult[0][1] + lk1MatrixResult[0][2];
        zeilenResultlk1_2 = lk1MatrixResult[1][0] + lk1MatrixResult[1][1] + lk1MatrixResult[1][2];
        zeilenResultlk1_3 = lk1MatrixResult[2][0] + lk1MatrixResult[2][1] + lk1MatrixResult[2][2];
        
        zeilenResultlk2_1 = lk2MatrixResult[0][0] + lk2MatrixResult[0][1] + lk2MatrixResult[0][2];
        zeilenResultlk2_2 = lk2MatrixResult[1][0] + lk2MatrixResult[1][1] + lk2MatrixResult[1][2];
        zeilenResultlk2_3 = lk2MatrixResult[2][0] + lk2MatrixResult[2][1] + lk2MatrixResult[2][2];
   
        zeilenResultlk3_1 = lk3MatrixResult[0][0] + lk3MatrixResult[0][1] + lk3MatrixResult[0][2];
        zeilenResultlk3_2 = lk3MatrixResult[1][0] + lk3MatrixResult[1][1] + lk3MatrixResult[1][2];
        zeilenResultlk3_3 = lk3MatrixResult[2][0] + lk3MatrixResult[2][1] + lk3MatrixResult[2][2];
        
        // berechne 100%
        hundertProzentlk1 = zeilenResultlk1_1 + zeilenResultlk1_2 + zeilenResultlk1_3;
        hundertProzentlk2 = zeilenResultlk2_1 + zeilenResultlk2_2 + zeilenResultlk2_3;
        hundertProzentlk3 = zeilenResultlk3_1 + zeilenResultlk3_2 + zeilenResultlk3_3;
        
        // berechne zeilenweise Prozentsätze mit Kriterienwichtung
        zeilenResultlk1_1 = Math.round(zeilenResultlk1_1 / hundertProzentlk1 * 10000)/100;
        localStorage.setItem("zeilenResultlk1_1", zeilenResultlk1_1);
        zeilenResultlk1_2 = Math.round(zeilenResultlk1_2 / hundertProzentlk1 * 10000)/100;
        localStorage.setItem("zeilenResultlk1_2", zeilenResultlk1_2);
        zeilenResultlk1_3 = Math.round(zeilenResultlk1_3 / hundertProzentlk1 * 10000)/100;
        localStorage.setItem("zeilenResultlk1_3", zeilenResultlk1_3);
        var arrK1 = 
        [
            [sloesung1, zeilenResultlk1_1],
            [sloesung2, zeilenResultlk1_2],
            [sloesung3, zeilenResultlk1_3]
        ];
        arrK1 = arrK1.sort(function(a,b) {
         return a[1] - b[1];
         });
//        alert(arr);
        var k1 = document.getElementById("k1");
        k1.innerHTML = '<h1>' + skriterium1 + '</h2>';
        var k1max = document.getElementById("k1max");
        k1max.innerHTML = '<svg width="180" height="180"><circle  cx="90" cy="90" r="80" stroke="" stroke-width="4" fill="#006cb0" /></svg> <h2>L&ouml;sung: ' + arrK1[2][0] + ',<br /> Wichtung: ' + arrK1[2][1] + '%</h2>';
        var k1med = document.getElementById("k1med");
        k1med.innerHTML = '<svg width="150" height="150"><circle cx="70" cy="70" r="60" stroke="" stroke-width="4" fill="#006cb0" /></svg> <h2>L&ouml;sung: ' + arrK1[1][0] + ',<br /> Wichtung: ' + arrK1[1][1] + '%</h2>';
        var k1min = document.getElementById("k1min");
        k1min.innerHTML = '<svg width="140" height="140"><circle cx="60" cy="60" r="50" stroke="" stroke-width="4" fill="#006cb0" /></svg> <h2>L&ouml;sung: ' + arrK1[0][0] + ',<br /> Wichtung: ' + arrK1[0][1] + '%</h2>';
    }
    
    
 
function compareSecondColumn(a, b) {
    if (a[1] === b[1]) {
        return 0;
    }
    else {
        return (a[1] < b[1]) ? -1 : 1;
    }
}
function multiply( mA, mB ) {
	
	var result = new Array( mA.length );
	
	for ( var i = 0; i < result.length; i++ ) {
		
		result[ i ] = new Array( mB[ i ].length );
		for ( var j = 0; j < mA.length; j++ ) {
			
			result[ i ][ j ] = 0; // result[ i ][ j ] is NaN, force to be zero
			for ( var k = 0; k < mB.length; k++ ) {
				
				result[ i ][ j ] += mA[ i ][ k ] * mB[ k ][ j ];
			}
		}
	}
	
	return result;
}
</script>  
    </body>
</html>
