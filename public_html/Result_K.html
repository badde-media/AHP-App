<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="Bilder/favicon.ico">
    <title>AHP APP</title>
    <link rel="stylesheet" href="css/foundation.css">
    <link rel="stylesheet" href="css/foundation-apps.css">
    <link rel="stylesheet" href="css/survey.css">
  </head>
    <body onLoad="berechne();">

        <!-- Start Title Bar -->
        <div class="primary title-bar">

            <div class="center title">Ergebnis Kriterien</div>
            <span class="left"><a href="Single_Test3.html">Zur√ºck</a></span>
            <span class="right"><a href="Single_Testlk1_1.html">Weiter</a></span>
        </div>

        <div class="wrap2">
            <div id="max" class="center"></div>

            <div id="med" class="center">
            </div>
            <div id="min" class="center">
            </div>
            <!--<svg width="130" height="130">
              <circle cx="50" cy="50" r="40" stroke="" stroke-width="4" fill="#006cb0" />
            </svg>-->
</div>
        
<script> 
    
    function berechne() {
        // Lade Kriterien-Namen
        var skriterium1= localStorage.getItem("skriterium1");
        var skriterium2= localStorage.getItem("skriterium2");
        var skriterium3= localStorage.getItem("skriterium3");
    
        // Lade Kriterien-Matrix
        kMatrix = JSON.parse(localStorage["kMatrix"]);  
	var kMatrixResult = multiply( kMatrix, kMatrix );
        
        // Lade Matrix-Quadrat
        localStorage["kMatrixResult"] = JSON.stringify(kMatrixResult);
        
        // Addiere Matrix zeilenweise
        zeilenResultk1 = kMatrixResult[0][0] + kMatrixResult[0][1] + kMatrixResult[0][2];
        zeilenResultk2 = kMatrixResult[1][0] + kMatrixResult[1][1] + kMatrixResult[1][2];
        zeilenResultk3 = kMatrixResult[2][0] + kMatrixResult[2][1] + kMatrixResult[2][2];
        
        // Berechne & speichere prozentuale Anteile der Zeilen
        hundertProzent = zeilenResultk1 + zeilenResultk2 + zeilenResultk3;
        zeilenResultk1 = Math.round(zeilenResultk1 / hundertProzent * 10000)/100;
        localStorage.setItem("zeilenResultk1", zeilenResultk1);
        zeilenResultk2 = Math.round(zeilenResultk2 / hundertProzent * 10000)/100;
        localStorage.setItem("zeilenResultk2", zeilenResultk2);
        zeilenResultk3 = Math.round(zeilenResultk3 / hundertProzent * 10000)/100;
        localStorage.setItem("zeilenResultk3", zeilenResultk3);
        // Kriterienwichtungs-Vektor
        var arr = 
        [
            [skriterium1, zeilenResultk1],
            [skriterium2, zeilenResultk2],
            [skriterium3, zeilenResultk3]
        ];
        // Kriterienwichtungs-Vektor absteigend sortieren und speichern
        arr = arr.sort(function(a,b) {
         return b[1] - a[1];
         });
         localStorage["arr"] = JSON.stringify(arr);
//        alert(arr);
        // Ausgabe Kriterienwichtung
        var max = document.getElementById("max");
        max.innerHTML = '<svg width="180" height="180"><circle  cx="90" cy="90" r="80" stroke="" stroke-width="4" fill="#006cb0" /></svg> <h2>Kriterium: ' + arr[0][0] + ',<br /> Wichtung: ' + arr[0][1] + '%</h2>';
        var med = document.getElementById("med");
        med.innerHTML = '<svg width="150" height="150"><circle cx="70" cy="70" r="60" stroke="" stroke-width="4" fill="#006cb0" /></svg> <h2>Kriterium: ' + arr[1][0] + ',<br /> Wichtung: ' + arr[1][1] + '%</h2>';
        var min = document.getElementById("min");
        min.innerHTML = '<svg width="140" height="140"><circle cx="60" cy="60" r="50" stroke="" stroke-width="4" fill="#006cb0" /></svg> <h2>Kriterium: ' + arr[2][0] + ',<br /> Wichtung: ' + arr[2][1] + '%</h2>';
    }
    
    
 
function compareSecondColumn(a, b) {
    if (a[1] === b[1]) {
        return 0;
    }
    else {
        return (a[1] < b[1]) ? -1 : 1;
    }
}
function multiply( mA, mB ) {
	
	var result = new Array( mA.length );
	
	for ( var i = 0; i < result.length; i++ ) {
		
		result[ i ] = new Array( mB[ i ].length );
		for ( var j = 0; j < mA.length; j++ ) {
			
			result[ i ][ j ] = 0; // result[ i ][ j ] is NaN, force to be zero
			for ( var k = 0; k < mB.length; k++ ) {
				
				result[ i ][ j ] += mA[ i ][ k ] * mB[ k ][ j ];
			}
		}
	}
	
	return result;
}
</script>  
    </body>
</html>
