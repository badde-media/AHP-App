/*! jQuery SH Image Select v1.1.3, Copyright 2012 Alexy Vauch! */
(function(b){b.fn.shImageSelect=function(h){var d;d=b.extend(!0,{mode:"checkbox",maxSelected:0,axis:"y",imageLimit:{x:3,y:3},showText:!0,additionalClass:"",theme:"box",skin:"light",callbacks:{onSelect:"",onUnselect:"",onSelectedLimit:"",onImagesReady:""}},h);return this.each(function(){b(this).data("sh-image-select",new u(b(this),d))})};var u=function(h,d){var c=this;this.wrapper=b("<div></div>").addClass("sh-img-select-wrapper");this.container=b("<div></div>").addClass("sh-img-select-container");
    this.screenContainer=b("<div></div>").addClass("sh-img-select-screen-container");this.select=function(a){"object"!==typeof a&&(a=c.container.find(".sh-img-select-image-"+a));m(a)};this.unselect=function(a){"object"!==typeof a&&(a=c.container.find(".sh-img-select-image-"+a));q(a)};var l=function(a){var f=function(){return"radio"===d.mode?function(a){a=a.children("img");var f=a.attr("class"),e=!1;h.children("[selected]").each(function(){var a=c.screenContainer.find("."+b(this).attr("class"));f!=b(this).attr("class")?
        q(a):e=!0;return e});e||m(a)}:function(a){var b=a.children("img");a.children(".sh-img-select-selected-layer").is(":visible")?q(b):m(b)}}(),e,p,g,k;d.showText?(g=function(a){a.children("img").stop().fadeTo(300,0.6);a.children(".sh-img-select-textblock").stop().animate({bottom:"5px"},"fast")},k=function(a){a.children("img").stop().fadeTo(300,1);a.children(".sh-img-select-textblock").stop().animate({bottom:"-100%"},"fast")},e=g,p=k):(g=function(a){a.children("img").stop().fadeTo(300,0.6)},k=function(a){a.children("img").stop().fadeTo(300,
        1)},p=e=function(a){});l={mouse:{doMouseClickImageActions:function(a){a.preventDefault();f(b(this))},doMouseOverImageActions:function(){g(b(this))},doMouseOutImageActions:function(){k(b(this))}},touch:function(){var c=!1,d=!1;return{doTouchStartImageActions:function(h){var g=b(this);h.preventDefault();c=!0;setTimeout(function(){a.draggingInEventsCycleFlag()||(c?(e(g),d=!0):f(g))},200)},doTouchEndImageActions:function(){c=!1;d&&(p(b(this)),d=!1)}}}()}},m=function(a){n.increment()&&(h.children("."+
        a.attr("class")).attr("selected","selected").end().triggerHandler("change"),r(a,"select",d.callbacks.onSelect))},q=function(a){n.decrement();h.children("."+a.attr("class")).removeAttr("selected").end().triggerHandler("change");r(a,"unselect",d.callbacks.onUnselect)},r=function(a,f,e){var d=a.parent().children(".sh-img-select-selected-layer");"select"==f?d.fadeTo("fast",s.selectedLayerOpacity):d.fadeOut("fast");e&&b.shHelper.callCallback(e,a,c)},n={count:0,increment:function(){if(this.isLimit())return b.shHelper.callCallback(d.callbacks.onSelectedLimit,
        c),!1;this.count++;return!0},decrement:function(){this.count--},isLimit:function(){return 0!==d.maxSelected&&this.count>=d.maxSelected}},s=function(){var a=d.theme,b="sh-img-select-theme-",c=0.6;switch(a){default:case "box":b+=a;break;case "minimal":c=1,b+=a}return{cssClass:b,selectedLayerOpacity:c}}(),t=function(){var a=d.skin,b="sh-img-select-",c="light";switch(a){case "dark":b+=a;c=a;break;default:case "light":b+=a,c=a}return{cssClass:b,scrollbarSkin:c}}();(function(){var a=[];h.attr("multiple")||
    h.attr("multiple","multiple");c.container.append(c.screenContainer);c.wrapper.append(c.container);h.hide().after(c.wrapper);c.wrapper.addClass(s.cssClass).addClass(t.cssClass).addClass(d.additionalClass);h.children().each(function(d){var e=b("<img>");d="sh-img-select-image-"+d;c.container.append(e);e.attr({src:b(this).data("image"),"class":d,alt:""});b(this).addClass(d);b(this).is(":selected")&&(n.increment(),a.push(e))});c.container.imagesLoaded(function(f){var e=0,p=b("<div></div>").addClass("sh-img-select-screen"),
        g=p,k,m=0,q=d.imageLimit.x*d.imageLimit.y;f.each(function(){var a=b("<div></div>").addClass("sh-img-select-image-wrapper"),f=b("<div></div>").addClass("sh-img-select-textblock"),l=b("<div></div>").addClass("sh-img-select-selected-layer");e==d.imageLimit.x&&(a.css("clear","left"),e=0);k&&k.children().length!=q||(k=p.clone().appendTo(c.screenContainer),m+=1);f.text(h.children("."+b(this).attr("class")).text());a.append(b(this),f,l).appendTo(k);1==m&&(g=k);e+=1});f=f.parent();b.each(a,function(a,b){r(b,
        "select")});if("y"==d.axis)c.screenContainer.children().css("clear","both"),c.container.css({"min-width":g.width(),height:g.height()});else{var n=0;c.container.css({width:g.width(),"min-height":g.height()});c.screenContainer.children().each(function(){n+=b(this).width()});c.screenContainer.css("width",n)}c.container.shScrollbar({axis:d.axis,skin:t.scrollbarSkin,contentElement:".sh-img-select-screen-container"});l(c.container.data("sh-scrollbar"));b.shHelper.callCallback(d.callbacks.onImagesReady,
        c);"ontouchstart"in document.documentElement?f.bind("touchstart",l.touch.doTouchStartImageActions).bind("touchend",l.touch.doTouchEndImageActions):f.bind("click",l.mouse.doMouseClickImageActions).bind("mouseover",l.mouse.doMouseOverImageActions).bind("mouseout",l.mouse.doMouseOutImageActions)})})()}})(jQuery);

/*! jQuery SH Scrollbar v1.1, Copyright 2012 Alexy Vauch! */
(function(e){e.fn.shScrollbar=function(m){var c;c=e.extend(!0,{axis:"y",contentElement:"",skin:"light",scrollLength:30},m);return this.each(function(){var f=e(this).find(c.contentElement);f.length?e(this).data("sh-scrollbar",new z(e(this),f,c)):alert("Could'nt find content block.")})};var z=function(m,c,f){this.wrapper=e("<div></div>").addClass("sh-scrollbar-wrapper");this.track=e("<div></div>").addClass("sh-scrollbar-track");this.slider=e("<div></div>").addClass("sh-scrollbar-slider");this.draggingInEventsCycleFlag=
    function(){return g.draggingInEventsCycleFlag()};var b=this,g,l={x:0,y:0},n=!1,y=e.support.selectstart?"selectstart":"mousedown";g={touch:{makeDraggable:function(a){a.preventDefault();n=!1;l.y=a.originalEvent.touches[0].pageY;l.x=a.originalEvent.touches[0].pageX;k.stopDrifting();k.saveSliderOffset()},dragging:function(a){var d={x:a.originalEvent.touches[0].pageX,y:a.originalEvent.touches[0].pageY};a.stopPropagation();n=!0;s.adjust(d[f.axis]);k.setNewOffsetTouch(d[f.axis]-l[f.axis]);b.slider.addClass("sh-scrollbar-draggable")},
    stopDragging:function(){var a=s.stop();a.offset&&(k.saveSliderOffset(),k.setNewOffsetTouchDrift(a.offset,a.animationSpeed));b.slider.removeClass("sh-scrollbar-draggable")}},mouse:{makeDraggable:function(a){n=!1;l.y=a.pageY;l.x=a.pageX;k.saveSliderOffset();e(document).bind("mousemove",g.mouse.dragging).bind("mouseup",g.mouse.stopDragging).bind(y+".disableSelection",function(a){a.preventDefault()});e(this).addClass("sh-scrollbar-draggable")},dragging:function(a){var d={x:a.pageX,y:a.pageY};a.stopPropagation();
    n=!0;k.setNewOffsetMouseFire(d[f.axis]-l[f.axis])},stopDragging:function(){e(document).unbind("mousemove",g.mouse.dragging).unbind("mouseup",g.mouse.stopDragging).unbind(y+".disableSelection");b.slider.removeClass("sh-scrollbar-draggable")},wheellScrolling:function(a,d){a.stopPropagation();a.preventDefault();k.setNewOffsetMouseScroll(d*f.scrollLength)}},draggingInEventsCycleFlag:function(){return n}};var s,q=0,h=0,t=0,u=0,j="-";s={adjust:function(a){var d=e.microtime(),c=j;a!==h&&(0>a-h&&"+"===j?
    j="-":0<a-h&&"-"===j&&(j="+"));c!==j&&(t=d,q=a);u=d;h=a},stop:function(){var a,d=0;a=0;var c=e.microtime();t&&(u&&q&&h&&0.07>c-u)&&(d=c-t,a=q>h?q-h:h-q);var c=!1,b="-"===j?"-":"",d=a/d;200<d&&1E3>d?c=b+a:1E3<=d&&(c=b+9999);return{animationSpeed:d,offset:c}}};var k=function(a,d,b){var e,f,g,h=0,j=0,l=function(a){0>a?a=0:a>e&&(a=e);return a},m=function(p){p=l(p);if(p!==h){var b=p;c.css(d,-(g-f)*p/e);a.slider.css(d,b);h=p}},n=function(a,d){var c,b;c=-e*a/(g-f)+j;c=l(c);b=-(g-f)*c/e;c!==h&&("function"===
    typeof d&&d.call(null,b,c),h=c)};k={saveSliderOffset:function(){j=h},setNewOffsetTouch:function(b){n(b,function(b,e){c.css(d,b);a.slider.css(d,e)})},setNewOffsetTouchDrift:function(b,e){n(b,function(b,p){var f={},g={};f[d]=b;g[d]=p;a.slider.animate(g,e);c.animate(f,e)})},stopDrifting:function(){a.slider.stop();c.stop();var b=a.slider.css(d);h="auto"===b?0:parseInt(b)},setNewOffsetMouseScroll:function(a){a=h-a;m(a)},setNewOffsetMouseFire:function(a){a+=j;m(a)}};e=a.track[b]()-a.slider[b]();f=a.container[b]();
    g=a.contentBlock[b]()},v;switch(f.skin){default:v="sh-scrollbar-light";break;case "dark":v="sh-scrollbar-dark"}var w,r,x;c.css("position","relative");b.track.append(b.slider).appendTo(b.wrapper);b.wrapper.appendTo(m);"y"===f.axis?(w="sh-scrollbar-track-y",r="height",x="top"):(w="sh-scrollbar-track-x",r="width",x="left");b.wrapper.addClass(v).addClass(w);c[r]()<=m[r]()?b.wrapper.remove():(k({container:m,contentBlock:c,track:b.track,slider:b.slider},x,r),"ontouchstart"in document.documentElement?c.bind("touchstart",
    g.touch.makeDraggable).bind("touchmove",g.touch.dragging).bind("touchend",g.touch.stopDragging):(c.mousewheel(g.mouse.wheellScrolling),b.slider.bind("mousedown",g.mouse.makeDraggable)))}})(jQuery);

/*! SH helper functions */
(function(d){d.extend({shHelper:{callCallback:function(a,b,c){return"function"===typeof a?a.call(b,c):!1}},addToObject:function(a,b){d.each(b,function(c,b){!1===c in a&&(a[c]=b)});return a},microtime:function(){return(new Date).getTime()/1E3},objectSize:function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b},getPercentagePart:function(a,b){var c=parseInt(b.replace("%",""));return a/100*c}})})(jQuery);

/**
 * "jQuery Mouse Wheel" - specifies the use of the mouse wheel..
 * @see https://github.com/brandonaaron/jquery-mousewheel for more info.
 */
(function(d){function e(a){var b=a||window.event,c=[].slice.call(arguments,1),f=0,e=0,g=0;a=d.event.fix(b);a.type="mousewheel";b.wheelDelta&&(f=b.wheelDelta/120);b.detail&&(f=-b.detail/3);g=f;void 0!==b.axis&&b.axis===b.HORIZONTAL_AXIS&&(g=0,e=-1*f);void 0!==b.wheelDeltaY&&(g=b.wheelDeltaY/120);void 0!==b.wheelDeltaX&&(e=-1*b.wheelDeltaX/120);c.unshift(a,f,e,g);return(d.event.dispatch||d.event.handle).apply(this,c)}var c=["DOMMouseScroll","mousewheel"];if(d.event.fixHooks)for(var h=c.length;h;)d.event.fixHooks[c[--h]]=
    d.event.mouseHooks;d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],e,!1);else this.onmousewheel=null}};d.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);

/**
 * "imagesLoaded" - cached images loader.
 * @see http://desandro.github.com/imagesloaded/ for more info.
 */
(function(c,n){var l="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";c.fn.imagesLoaded=function(f){function m(){var b=c(i),a=c(h);d&&(h.length?d.reject(e,b,a):d.resolve(e));c.isFunction(f)&&f.call(g,e,b,a)}function j(b,a){b.src===l||-1!==c.inArray(b,k)||(k.push(b),a?h.push(b):i.push(b),c.data(b,"imagesLoaded",{isBroken:a,src:b.src}),o&&d.notifyWith(c(b),[a,e,c(i),c(h)]),e.length===k.length&&(setTimeout(m),e.unbind(".imagesLoaded")))}var g=this,d=c.isFunction(c.Deferred)?c.Deferred():
    0,o=c.isFunction(d.notify),e=g.find("img").add(g.filter("img")),k=[],i=[],h=[];c.isPlainObject(f)&&c.each(f,function(b,a){if("callback"===b)f=a;else if(d)d[b](a)});e.length?e.bind("load.imagesLoaded error.imagesLoaded",function(b){j(b.target,"error"===b.type)}).each(function(b,a){var d=a.src,e=c.data(a,"imagesLoaded");if(e&&e.src===d)j(a,e.isBroken);else if(a.complete&&a.naturalWidth!==n)j(a,0===a.naturalWidth||0===a.naturalHeight);else if(a.readyState||a.complete)a.src=l,a.src=d}):m();return d?d.promise(g):
    g}})(jQuery);